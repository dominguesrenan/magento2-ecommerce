<?php
/** @var \Bistwobis\ListaSugestoes\Block\ListaSugestoes $block */
/** @var \Magento\Framework\Escaper $escaper */
?>
<div class="lista-sugestoes">
    <div class="lista-header">
        <h1><?= $escaper->escapeHtml(__('Listas de SugestÃµes')) ?></h1>
        <div class="lista-filters">
            <select id="category-filter" class="category-filter">
                <option value=""><?= $escaper->escapeHtml(__('Todas as Categorias')) ?></option>
                <?php foreach ($block->getCategorias() as $categoria): ?>
                    <option value="<?= $escaper->escapeHtmlAttr($categoria) ?>">
                        <?= $escaper->escapeHtml($categoria) ?>
                    </option>
                <?php endforeach; ?>
            </select>
        </div>
    </div>

    <div class="listas-container">
        <?php foreach ($block->getListas() as $lista): ?>
            <div class="lista-item" data-category="<?= $escaper->escapeHtmlAttr($lista->getData('tipo_cliente')) ?>">
                <div class="lista-content">
                    <h2>
                        <a href="<?= $escaper->escapeUrl($block->getListaUrl($lista)) ?>">
                            <?= $escaper->escapeHtml($block->getListaTitle($lista)) ?>
                        </a>
                    </h2>
                    <div class="lista-description">
                        <?= $escaper->escapeHtml($lista->getData('tipo_cliente')) ?>
                    </div>
                </div>
                <div class="lista-actions">
                    <button type="button" class="action primary" 
                            onclick="window.location.href='<?= $escaper->escapeUrl($block->getListaUrl($lista)) ?>'">
                        <?= $escaper->escapeHtml(__('Ver Produtos')) ?>
                    </button>
                </div>
            </div>
        <?php endforeach; ?>
    </div>
</div>

<script type="text/x-magento-init">
{
    ".lista-sugestoes": {
        "Bistwobis_ListaSugestoes/js/lista-filter": {}
    }
}
</script> 